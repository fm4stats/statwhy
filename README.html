<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <style>
        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background-color: #f5f5f5;
        }

        /* Headers */
        h1, h2, h3 {
            color: #2c3e50;
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.5rem;
        }

        h1 {
            font-size: 2.5rem;
            text-align: center;
        }

        h2 {
            font-size: 2rem;
        }
        h3 {
            font-size: 1.5rem;
        }

        /* Code blocks */
        pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 0.75rem 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        pre code {
            padding: 0;
            background: none;
            border-radius: 0;
            display: block;
        }

        code {
            font-family: 'Source Code Pro', Consolas, Monaco, 'Courier New', monospace;
            background-color: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.9em;
        }

        /* Images */
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 2rem auto;
        }

        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
        }

        a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        /* Paragraphs and lists */
        p {
            margin: 1rem 0;
        } 
        ul, ol {
            padding-left: 2rem;
            margin: 1rem 0;
        }
        /* Responsive design */
        @media (max-width: 850px) {
            body {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }
            h3 {
                font-size: 1.25rem;
            }
        }
    </style>
</head>

<body>

<h1 id="statwhy-v.1.3.0">StatWhy v.1.3.0</h1>
<p>StatWhy is a software tool for automatically verifying the
correctness of statistical hypothesis testing programs. In this file, we
present the structure of this repository, the resource requirements for
the tool, and show how to verify the programs that implement the
hypothesis testing examples addressed in our paper:</p>
<pre><code>StatWhy: Formal Verification Tool for Statistical Hypothesis Testing Programs.
Yusuke Kawamoto, Kentaro Kobayashi, and Kohei Suenaga. [alphabetical authorship]
Proc. of 37th International Conference on Computer Aided Verification (CAV 2025),
Part II, Lecture Notes in Computer Science, Vol.15932, pp.216-230, July 2025.</code></pre>
<h2 id="structure-of-the-repository">Structure of the repository</h2>
<pre><code>root/
├ README.md                        this file
├ install.sh                       installation script
├ cameleer                         source code of *cameleer*
│ └ statwhy                        source code of *statwhy*
│   ├ lib                          core library of statwhy, including the specification
│   │                              of many hypothesis testing methods
│   └ ...
├ doc
│ └ Statwhy_User_Documentation.pdf user documentation of statwhy
├ examples                         example codes for replicating the results
│ ├ mlw                            WhyML codes not explained in this file
│ └ executable_examples            OCaml codes executable using pyml and scipy
└ ...</code></pre>
<h2 id="resource-requirements">Resource requirements</h2>
<p>StatWhy has been tested on the following environments:</p>
<ol type="1">
<li>MacBook Pro – M2 Max CPU, 96 GB RAM, macOS 15.3.2</li>
<li>DELL Precision 5490 – Intel Core Ultra 9 185H, 64 GB RAM, Windows 11
and Ubuntu 24.04 (via VirtualBox)</li>
</ol>
<h2 id="correctness-of-statwhy">Correctness of StatWhy</h2>
<p>We have tested the tool StatWhy by (i) checking that StatWhy can
correctly verify various major hypothesis testing methods in a short
time in a way that is consistent with standard textbooks on statistics
and (ii) proving various lemmas on the properties of epistemic logic
(statELHT.mlw) and on those of hypothesis tests and belief Hoare logic
(statBHL.mlw).</p>
<h2 id="installing-statwhy">Installing StatWhy</h2>
<h3 id="auto-installation-using-bash-script-ubuntu-24.04">Auto
Installation using Bash Script (Ubuntu 24.04)</h3>
<p>On Ubuntu 24.04, StatWhy can be installed by running the following
commands:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> chmod +x install.sh</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./install.sh</span></code></pre></div>
<p>During installation, you will be prompted to enter <code>y</code> or
<code>n</code> multiple times. Press <code>y</code> when prompted.</p>
<p>After installation, restart the machine or log in again to apply the
changes made to <code>~/.profile</code>.</p>
<h3 id="manual-installation">Manual Installation</h3>
<ol type="1">
<li>Install opam</li>
</ol>
<p>On Ubuntu:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo apt-get update</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo apt-get install opam</span></code></pre></div>
<p>On macOS, install opam with Homebrew:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> brew install opam</span></code></pre></div>
<p>Alternatively, if you use MacPorts:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> port install opam</span></code></pre></div>
<ol start="2" type="1">
<li>Install OCaml 5.0.0</li>
</ol>
<p>To install OCaml 5.0.0, execute the following command:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> opam switch create 5.0.0</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> eval <span class="va">$(</span><span class="ex">opam</span> env<span class="va">)</span></span></code></pre></div>
<ol start="3" type="1">
<li>Install StatWhy and Cameleer</li>
</ol>
<p>Download the source code of StatWhy, including an extension of
Cameleer. Install and by running:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> unzip statwhy-1.3.0.zip</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd cameleer</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> opam pin add .</span></code></pre></div>
<p>This will install Cameleer, StatWhy (included in
<code>cameleer/statwhy</code>), and their dependencies. In the
installation of Cameleer, the Why3 platform is automatically
installed.</p>
<ol start="4" type="1">
<li>Install CVC5</li>
</ol>
<p>On Ubuntu 24.04 LTS, you can install CVC5 by:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo apt install cvc5</span></code></pre></div>
<p>Alternatively, you can directly download a binary from the GitHub
repository:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wget https://github.com/cvc5/cvc5/releases/download/cvc5-1.2.0/cvc5-Linux-x86_64-static.zip</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> unzip cvc5-Linux-x86_64-static.zip</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo cp ./cvc5-Linux-x86_64-static/bin/cvc5 /usr/local/bin</span></code></pre></div>
<p>On macOS, a Homebrew Tap for CVC5 is also available:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> brew tap cvc5/homebrew-cvc5</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> brew install cvc5</span></code></pre></div>
<p>After installing the solver, run the following command to let Why3
detect it:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> why3 config detect</span></code></pre></div>
<p>As an initial test, try running the one-sample t-test program by
following the instructions in <a
href="###%20Example%201:%20One-sample%20t-test%20(Section%203.1%20in%20our%20paper)">Example
1</a> below.</p>
<p><em>Note</em>: If you update from an older version of StatWhy or have
updated CVC5 since your last StatWhy installation, we recommend deleting
the old ~/.statwhy.conf file.</p>
<h3 id="execute-ocaml-programs">Execute OCaml programs</h3>
<p>To execute <code>.ml</code> files in
<code>examples/executable_examples</code>, you need to install</p>
<ol type="1">
<li>pyml (OCaml package)</li>
<li>scipy (Python library)</li>
</ol>
<p>Pyml can be installed via opam:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">opam</span> install pyml</span></code></pre></div>
<p>Numpy can be installed via pip:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install scipy</span></code></pre></div>
<h2 id="usage">Usage</h2>
<p>You can verify an OCaml code via Cameleer by running the
following:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> statwhy <span class="op">&lt;</span>file-to-be-verified<span class="op">&gt;</span>.ml</span></code></pre></div>
<p>If you want to verify a WhyML code:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> statwhy <span class="op">&lt;</span>file-to-be-verified<span class="op">&gt;</span>.mlw</span></code></pre></div>
<p>Note that in both cases, you need our extension of Cameleer to load
StatWhy.</p>
<pre><code>statwhy &lt;file&gt;.(ml|mlw)
Verify (OCaml|WhyML) program

  -L add &lt;dir&gt; to the search path
  --genconf generate config file
  --debug print debug information
  --batch activate batch mode
  --extract activate extraction mode
  --prover set prover for batch mode
  --version  print version information</code></pre>
<h2 id="example-one-sample-t-test">Example: One-sample t-test</h2>
<p>We demonstrate how to verify a program that conducts a one-sample
t-test, which is used to compare a population mean with a specified
value. To verify the OCaml program <code>examples/example1.ml</code>,
run the following command:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">statwhy</span> example1.ml</span></code></pre></div>
<p>This will launch the Why3 IDE as follows:</p>
<p><img src="./screenshots/example1-why3-ide.png?raw=true"
title="The Why3 IDE screen." /></p>
<p>There are two verification conditions (VCs) to be discharged:
example_1’vc (the VC for <code>example1</code>) and example1’‘vc (the VC
for <code>example1'</code>). Right-click on the first goal and select
’StatWhy’ (<strong>Not ‘CVC5’ or the other items</strong>), or press ‘4’
after selecting the goal to make StatWhy try to discharge the goal. If
the prover successfully verifies the goal, a check mark will appear as
follows.</p>
<p><img src="./screenshots/example1-successful.png?raw=true"
title="The Why3 IDE screen successfully discharged example1&#39;vc." /></p>
<p>The second goal, example1’’vc, is similar to the first except that
the expression <code>sampled d t_n</code> is missing from the
requires-clause, i.e., the specification does not describe the
requirement that the data set <code>d</code> is sampled from a normally
distributed population. If this requirement is not satisfied, it is not
appropriate for us to use the t-test.</p>
<p>By running StatWhy, you can automatically detect that this
requirement is missing in the annnotation of the program. In fact, if
you press ‘4’ on example_1samp_t_test_fail’vc, <strong>StatWhy will fail
to discharge the goal</strong>, as shown below. At this point, StatWhy
generates sub-goals by applying transformations and attempts to prove
them. By examining the results of the sub-goals, you can see which
conditions are missing in the annotation of the program.</p>
<p><img src="./screenshots/example1-timed-out.png?raw=true"
title="The Why3 IDE screen showing a goal that StatWhy could not discharge." /></p>
<p><strong>We emphasize that the above screenshot is the intended
result</strong>, in which several verification conditions are not
discharged due to the lack of the precondition. In the above screenshot,
the condition <code>sampled d (NormalD ...)</code> fails to discharge,
which is equivalent to the missing precondition
<code>sampled d t_n</code>.</p>
<ul>
<li>Approximate execution time: 1.5 min</li>
</ul>
<h2 id="other-examples-on-various-hypothesis-testing-methods">Other
examples on various hypothesis testing methods</h2>
<p>We have implemented various hypothesis testing methods not presented
in the paper. For details, see the User Documentation.</p>

</body>
</html>
